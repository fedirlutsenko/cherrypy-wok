{
    "$schema": "http://json-schema.org/draft-03/schema#",
    "title": "Kimchi API",
    "description": "Json schema for Kimchi API",
    "type": "object",
    "properties": {
        "vms_create": {
            "type": "object",
            "properties": {
                "name": {
                    "description": "The name of the new VM",
                    "type": "string"
                },
                "template": {
                    "description": "The URI of a template to use when building a VM",
                    "type": "string",
                    "pattern": "^/templates/[^/]+/?$",
                    "required": true
                },
                "storagepool": {
                    "description": "Assign a specefic Storage Pool to the new VM",
                    "type": "string",
                    "pattern": "^/storagepools/[^/]+/?$"
                }
            }
        },
        "vm_update": {
            "type": "object",
            "properties": {
                "name": {
                    "description": "New name of VM",
                    "type": "string",
                    "minLength": 1
                }
            }
        },
        "networks_create": {
            "type": "object",
            "properties": {
                "name": {
                    "description": "The name of the new network",
                    "type": "string",
                    "minLength": 1,
                    "required": true
                },
                "connection": {
                    "description": "Specifies how this network should be connected to the other networks",
                    "type": "string",
                    "pattern": "^isolated|nat|bridge$",
                    "required": true
                },
                "subnet": {
                    "description": "Network segment in slash-separated format with ip address and prefix or netmask",
                    "type": "string"
                },
                "interface": {
                    "description": "The name of a network interface on the host",
                    "type": "string"
                }
            }
        },
        "templates_create": {
            "type": "object",
            "properties": {
                "name": {
                    "description": "The name of the template",
                    "type": "string",
                    "pattern": "^[^ ]+( +[^ ]+)*$",
                    "minLength": 1
                },
                "icon": {
                    "description": "The template icon path",
                    "type": "string",
                    "pattern": "^images/"
                },
                "os_distro": {
                    "description": "Distribution name of the Operating System",
                    "type": "string",
                    "minLength": 1
                },
                "os_version": {
                    "description": "Version of the Operating System",
                    "type": "string",
                    "minLength": 1
                },
                "cpus": {
                    "description": "Number of CPUs for the template",
                    "type": "integer",
                    "minimum": 1
                },
                "memory": {
                    "description": "Memory (MB) for the template",
                    "type": "integer",
                    "minimum": 512
                },
                "cdrom": {
                    "description": "Path for cdrom",
                    "type": "string",
                    "pattern": "^((/)|(http)[s]?:|[t]?(ftp)[s]?:)+.*([.]iso)$",
                    "required": true
                },
                "disks": {
                    "description": "List of disks",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "index": {
                                "description": "Index of the disk",
                                "type": "integer",
                                "minimum": 0
                            },
                            "size": {
                                "description": "Size (GB) of the disk",
                                "type": "number",
                                "minimum": 1
                            }
                        }
                    },
                    "minItems": 1,
                    "uniqueItems": true
                },
                "storagepool": {
                    "description": "Location of the storage pool",
                    "type": "string",
                    "pattern": "^/storagepools/[^/]+/?$"
                },
                "folder": {
                    "description": "Folder",
                    "type": "array",
                    "items": { "type": "string" }
                }
            },
            "additionalProperties": false
        },
        "template_update": {
            "type": "object",
            "properties": {
                "name": {
                    "description": "The name of the template",
                    "type": "string",
                    "pattern": "^[^ ]+( +[^ ]+)*$",
                    "minLength": 1
                },
                "icon": {
                    "description": "The template icon path",
                    "type": "string",
                    "pattern": "^images/"
                },
                "os_distro": {
                    "description": "Distribution name of the Operating System",
                    "type": "string",
                    "minLength": 1
                },
                "os_version": {
                    "description": "Version of the Operating System",
                    "type": "string",
                    "minLength": 1
                },
                "cpus": {
                    "description": "Number of CPUs for the template",
                    "type": "integer",
                    "minimum": 1
                },
                "memory": {
                    "description": "Memory (MB) for the template",
                    "type": "integer",
                    "minimum": 512
                },
                "cdrom": {
                    "description": "Path for cdrom",
                    "type": "string",
                    "pattern": "^((/)|(http)[s]?:|[t]?(ftp)[s]?:)+.*([.]iso)$"
                },
                "disks": {
                    "description": "List of disks",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "index": {
                                "description": "Index of the disk",
                                "type": "integer",
                                "minimum": 0
                            },
                            "size": {
                                "description": "Size (GB) of the disk",
                                "type": "number",
                                "minimum": 1
                            }
                        }
                    },
                    "minItems": 1,
                    "uniqueItems": true
                },
                "storagepool": {
                    "description": "Location of the storage pool",
                    "type": "string",
                    "pattern": "^/storagepools/[^/]+/?$"
                },
                "folder": {
                    "description": "Folder",
                    "type": "array",
                    "items": { "type": "string" }
                }
            },
            "additionalProperties": false
        }
    }
}
